{% extends "base.html" %}

{% block title %}{{ artigo.titulo }} - Blog Clínica do Reparo{% endblock %}

{% block content %}
<section class="article-header" {% if artigo.imagem_destaque %}style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('{{ url_for('static', filename=artigo.imagem_destaque) }}');"{% endif %}>
    <div class="container">
        <div class="article-header-content">
            <span class="article-category">{{ artigo.categoria or 'Geral' }}</span>
            <h1>{{ artigo.titulo }}</h1>
            {% if artigo.subtitulo %}
            <h2 class="article-subtitle">{{ artigo.subtitulo }}</h2>
            {% endif %}
            <div class="article-meta">
                <span><i class="fas fa-user"></i> {{ artigo.autor or 'Equipe Clínica do Reparo' }}</span>
                <span><i class="fas fa-calendar"></i> 
                    {% if artigo.data_publicacao %}
                        {% set data_parts = artigo.data_publicacao.split(' ') %}
                        {{ data_parts[0] }}
                        {% if artigo.hora_publicacao %}
                            às {{ artigo.hora_publicacao[:5] }}
                        {% elif data_parts|length > 1 %}
                            às {{ data_parts[1][:5] }}
                        {% endif %}
                    {% endif %}
                </span>
            </div>
        </div>
    </div>
</section>

<section class="article-section">
    <div class="container">
        <div class="article-wrapper">
            <article class="article-content">
                {% if artigo.resumo %}
                <div class="article-resumo">
                    <p>{{ artigo.resumo }}</p>
                </div>
                {% endif %}
                
                <div class="article-text">
                    {{ artigo.conteudo|replace('\n', '<br>')|safe }}
                </div>
            </article>
            
            {% if artigos_relacionados %}
            <aside class="article-sidebar">
                <h3>Artigos Relacionados</h3>
                <div class="related-articles">
                    {% for relacionado in artigos_relacionados %}
                    <div class="related-article">
                        <a href="{{ url_for('artigo', artigo_id=relacionado.id) }}">
                            <h4>{{ relacionado.titulo }}</h4>
                            <span class="related-date">{{ relacionado.data_publicacao[:10] }}</span>
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </aside>
            {% endif %}
        </div>
        
        <div class="article-actions">
            <a href="{{ url_for('blog') }}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Voltar ao Blog
            </a>
        </div>
    </div>
</section>

<style>
.article-header {
    padding: 6rem 0 4rem;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    background-size: cover;
    background-position: center;
    color: white;
    text-align: center;
}

.article-header-content {
    max-width: 800px;
    margin: 0 auto;
}

.article-category {
    display: inline-block;
    background: rgba(255, 255, 255, 0.2);
    padding: 0.5rem 1.5rem;
    border-radius: 50px;
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.85rem;
    margin-bottom: 1.5rem;
    backdrop-filter: blur(10px);
}

.article-header h1 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    line-height: 1.2;
}

.article-subtitle {
    font-size: 1.5rem;
    font-weight: 400;
    margin-bottom: 1.5rem;
    opacity: 0.9;
    line-height: 1.4;
}

.article-meta {
    display: flex;
    gap: 2rem;
    justify-content: center;
    font-size: 1rem;
    opacity: 0.9;
}

.article-meta span {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.article-section {
    padding: 4rem 0;
    background: var(--bg-secondary);
}

.article-wrapper {
    display: grid;
    grid-template-columns: 1fr 300px;
    gap: 3rem;
    max-width: 1200px;
    margin: 0 auto;
}

.article-content {
    background: white;
    border-radius: 12px;
    padding: 3rem;
    box-shadow: var(--shadow-md);
}

.article-resumo {
    background: var(--bg-secondary);
    padding: 1.5rem;
    border-left: 4px solid var(--primary-color);
    border-radius: 8px;
    margin-bottom: 2rem;
    font-size: 1.1rem;
    font-style: italic;
    color: var(--text-primary);
}

.article-text {
    color: var(--text-primary);
    line-height: 1.8;
    font-size: 1.05rem;
}

.article-text p {
    margin-bottom: 1.5rem;
}

.article-sidebar {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    box-shadow: var(--shadow-md);
    height: fit-content;
    position: sticky;
    top: 100px;
}

.article-sidebar h3 {
    color: var(--text-primary);
    margin-bottom: 1.5rem;
    font-size: 1.3rem;
}

.related-articles {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.related-article {
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-color);
}

.related-article:last-child {
    border-bottom: none;
    padding-bottom: 0;
}

.related-article a {
    text-decoration: none;
    color: var(--text-primary);
    transition: color 0.3s ease;
}

.related-article a:hover {
    color: var(--primary-color);
}

.related-article h4 {
    font-size: 1rem;
    margin-bottom: 0.5rem;
    line-height: 1.4;
}

.related-date {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.article-actions {
    margin-top: 3rem;
    text-align: center;
}

@media (max-width: 968px) {
    .article-wrapper {
        grid-template-columns: 1fr;
    }
    
    .article-sidebar {
        position: static;
    }
    
    .article-header h1 {
        font-size: 2rem;
    }
}
</style>
{% endblock %}

