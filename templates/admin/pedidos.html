{% extends "admin/base_admin.html" %}

{% block title %}Pedidos - Painel Admin{% endblock %}

{% block content %}
<div class="admin-header">
    <div>
        <h1><i class="fas fa-shopping-cart"></i> Gerenciar Pedidos</h1>
        <p>Visualize e gerencie os pedidos da loja</p>
    </div>
</div>

{% if pedidos %}
<div class="table-responsive">
    <table class="admin-table">
        <thead>
            <tr>
                <th>Nº Pedido</th>
                <th>Cliente</th>
                <th>Contato</th>
                <th>Itens</th>
                <th>Total</th>
                <th>Status</th>
                <th>Data</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for pedido in pedidos %}
            <tr>
                <td><strong>#{{ pedido.numero }}</strong></td>
                <td>{{ pedido.nome }}</td>
                <td>
                    {{ pedido.email }}<br>
                    <small>{{ pedido.telefone }}</small>
                </td>
                <td>{{ pedido.itens_count }} item(ns)</td>
                <td><strong>R$ {{ "%.2f"|format(pedido.total) }}</strong></td>
                <td>
                    {% if pedido.status == 'pendente' %}
                    <span class="status-badge" style="background: #f39c12;">Pendente</span>
                    {% elif pedido.status == 'processando' %}
                    <span class="status-badge" style="background: #3498db;">Processando</span>
                    {% elif pedido.status == 'enviado' %}
                    <span class="status-badge" style="background: #9b59b6;">Enviado</span>
                    {% elif pedido.status == 'entregue' %}
                    <span class="status-badge status-ativo">Entregue</span>
                    {% elif pedido.status == 'cancelado' %}
                    <span class="status-badge status-inativo">Cancelado</span>
                    {% else %}
                    <span class="status-badge">{{ pedido.status }}</span>
                    {% endif %}
                </td>
                <td>{{ pedido.data_pedido }}</td>
                <td>
                    <div class="action-buttons">
                        <a href="{{ url_for('admin_pedido_detalhes', pedido_id=pedido.id) }}" class="btn-icon" title="Ver Detalhes">
                            <i class="fas fa-eye"></i>
                        </a>
                        <a href="{{ url_for('admin_edit_pedido', pedido_id=pedido.id) }}" class="btn-icon" title="Editar">
                            <i class="fas fa-edit"></i>
                        </a>
                        <form method="POST" action="{{ url_for('admin_delete_pedido', pedido_id=pedido.id) }}" style="display: inline;" onsubmit="return confirm('Tem certeza que deseja excluir este pedido? Esta ação não pode ser desfeita.');">
                            <button type="submit" class="btn-icon btn-danger" title="Excluir">
                                <i class="fas fa-trash"></i>
                            </button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="empty-state">
    <i class="fas fa-shopping-cart"></i>
    <p>Nenhum pedido encontrado</p>
</div>
{% endif %}
{% endblock %}

