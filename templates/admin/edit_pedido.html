{% extends "admin/base_admin.html" %}

{% block title %}Editar Pedido #{{ pedido.numero }} - Painel Admin{% endblock %}

{% block content %}
<div class="admin-header">
    <div>
        <h1><i class="fas fa-edit"></i> Editar Pedido #{{ pedido.numero }}</h1>
        <p>Data: {{ pedido.data_pedido }}</p>
    </div>
    <a href="{{ url_for('admin_pedidos') }}" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Voltar
    </a>
</div>

<div class="admin-form-card">
    <form method="POST" action="{{ url_for('admin_edit_pedido', pedido_id=pedido.id) }}" class="admin-form">
        <h2 style="margin-bottom: 1.5rem;">Dados do Cliente</h2>
        
        <div class="form-row">
            <div class="form-group">
                <label for="nome">Nome *</label>
                <input type="text" id="nome" name="nome" value="{{ pedido.nome }}" required>
            </div>
            <div class="form-group">
                <label for="cpf">CPF</label>
                <input type="text" id="cpf" name="cpf" value="{{ pedido.cpf }}" placeholder="000.000.000-00">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="email">E-mail *</label>
                <input type="email" id="email" name="email" value="{{ pedido.email }}" required>
            </div>
            <div class="form-group">
                <label for="telefone">Telefone *</label>
                <input type="text" id="telefone" name="telefone" value="{{ pedido.telefone }}" required placeholder="(11) 99999-9999">
            </div>
        </div>
        
        <div class="form-group">
            <label for="endereco">Endereço *</label>
            <input type="text" id="endereco" name="endereco" value="{{ pedido.endereco }}" required placeholder="Rua, número, complemento">
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="cep">CEP</label>
                <input type="text" id="cep" name="cep" value="{{ pedido.cep }}" placeholder="00000-000">
            </div>
            <div class="form-group">
                <label for="cidade">Cidade *</label>
                <input type="text" id="cidade" name="cidade" value="{{ pedido.cidade }}" required>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="estado">Estado *</label>
                <select id="estado" name="estado" required>
                        <option value="">Selecione</option>
                        <option value="AC" {% if pedido.estado == 'AC' %}selected{% endif %}>Acre</option>
                        <option value="AL" {% if pedido.estado == 'AL' %}selected{% endif %}>Alagoas</option>
                        <option value="AP" {% if pedido.estado == 'AP' %}selected{% endif %}>Amapá</option>
                        <option value="AM" {% if pedido.estado == 'AM' %}selected{% endif %}>Amazonas</option>
                        <option value="BA" {% if pedido.estado == 'BA' %}selected{% endif %}>Bahia</option>
                        <option value="CE" {% if pedido.estado == 'CE' %}selected{% endif %}>Ceará</option>
                        <option value="DF" {% if pedido.estado == 'DF' %}selected{% endif %}>Distrito Federal</option>
                        <option value="ES" {% if pedido.estado == 'ES' %}selected{% endif %}>Espírito Santo</option>
                        <option value="GO" {% if pedido.estado == 'GO' %}selected{% endif %}>Goiás</option>
                        <option value="MA" {% if pedido.estado == 'MA' %}selected{% endif %}>Maranhão</option>
                        <option value="MT" {% if pedido.estado == 'MT' %}selected{% endif %}>Mato Grosso</option>
                        <option value="MS" {% if pedido.estado == 'MS' %}selected{% endif %}>Mato Grosso do Sul</option>
                        <option value="MG" {% if pedido.estado == 'MG' %}selected{% endif %}>Minas Gerais</option>
                        <option value="PA" {% if pedido.estado == 'PA' %}selected{% endif %}>Pará</option>
                        <option value="PB" {% if pedido.estado == 'PB' %}selected{% endif %}>Paraíba</option>
                        <option value="PR" {% if pedido.estado == 'PR' %}selected{% endif %}>Paraná</option>
                        <option value="PE" {% if pedido.estado == 'PE' %}selected{% endif %}>Pernambuco</option>
                        <option value="PI" {% if pedido.estado == 'PI' %}selected{% endif %}>Piauí</option>
                        <option value="RJ" {% if pedido.estado == 'RJ' %}selected{% endif %}>Rio de Janeiro</option>
                        <option value="RN" {% if pedido.estado == 'RN' %}selected{% endif %}>Rio Grande do Norte</option>
                        <option value="RS" {% if pedido.estado == 'RS' %}selected{% endif %}>Rio Grande do Sul</option>
                        <option value="RO" {% if pedido.estado == 'RO' %}selected{% endif %}>Rondônia</option>
                        <option value="RR" {% if pedido.estado == 'RR' %}selected{% endif %}>Roraima</option>
                        <option value="SC" {% if pedido.estado == 'SC' %}selected{% endif %}>Santa Catarina</option>
                        <option value="SP" {% if pedido.estado == 'SP' %}selected{% endif %}>São Paulo</option>
                        <option value="SE" {% if pedido.estado == 'SE' %}selected{% endif %}>Sergipe</option>
                        <option value="TO" {% if pedido.estado == 'TO' %}selected{% endif %}>Tocantins</option>
                    </select>
            </div>
        </div>
        
        <div class="form-group">
            <label for="status">Status do Pedido *</label>
            <select id="status" name="status" required>
                <option value="pendente" {% if pedido.status == 'pendente' %}selected{% endif %}>Pendente</option>
                <option value="processando" {% if pedido.status == 'processando' %}selected{% endif %}>Processando</option>
                <option value="enviado" {% if pedido.status == 'enviado' %}selected{% endif %}>Enviado</option>
                <option value="entregue" {% if pedido.status == 'entregue' %}selected{% endif %}>Entregue</option>
                <option value="cancelado" {% if pedido.status == 'cancelado' %}selected{% endif %}>Cancelado</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="observacoes">Observações</label>
            <textarea id="observacoes" name="observacoes" rows="4" placeholder="Observações sobre o pedido...">{{ pedido.observacoes }}</textarea>
        </div>
        
        <div class="form-group" style="background: #f5f5f5; padding: 1rem; border-radius: 5px;">
            <label style="font-weight: bold;">Total do Pedido</label>
            <p style="font-size: 1.5rem; color: var(--primary-color); font-weight: bold; margin: 0.5rem 0 0 0;">
                R$ {{ "%.2f"|format(pedido.total) }}
            </p>
            <small style="color: #666;">O total é calculado automaticamente com base nos itens do pedido.</small>
        </div>
        
        <div class="form-actions">
            <a href="{{ url_for('admin_pedidos') }}" class="btn btn-secondary">
                <i class="fas fa-times"></i> Cancelar
            </a>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Salvar Alterações
            </button>
        </div>
    </form>
</div>
{% endblock %}

