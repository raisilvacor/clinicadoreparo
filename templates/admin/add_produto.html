{% extends "admin/base_admin.html" %}

{% block title %}Adicionar Produto - Painel Admin{% endblock %}

{% block content %}
<div class="admin-header">
    <h1><i class="fas fa-plus-circle"></i> Adicionar Novo Produto</h1>
    <p>Preencha os dados do produto</p>
</div>

<div class="admin-form-card">
    <form method="POST" action="{{ url_for('admin_add_produto') }}" enctype="multipart/form-data" class="admin-form">
        <div class="form-group">
            <label for="nome">Nome do Produto *</label>
            <input type="text" id="nome" name="nome" required placeholder="Ex: Tela iPhone 12">
        </div>
        
        <div class="form-group">
            <label for="slug">Slug (URL) *</label>
            <input type="text" id="slug" name="slug" placeholder="Será gerado automaticamente se deixado em branco">
            <small class="form-help">URL amigável (ex: tela-iphone-12). Deixe em branco para gerar automaticamente.</small>
        </div>
        
        <div class="form-group">
            <label for="categoria_id">Categoria</label>
            <select id="categoria_id" name="categoria_id">
                <option value="">Selecione uma categoria</option>
                {% for cat in categorias %}
                <option value="{{ cat.id }}">{{ cat.nome }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="preco">Preço *</label>
                <input type="number" id="preco" name="preco" step="0.01" min="0" required placeholder="0.00">
            </div>
            <div class="form-group">
                <label for="preco_promocional">Preço Promocional</label>
                <input type="number" id="preco_promocional" name="preco_promocional" step="0.01" min="0" placeholder="0.00">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="estoque">Estoque *</label>
                <input type="number" id="estoque" name="estoque" min="0" value="0" required>
            </div>
            <div class="form-group">
                <label for="sku">SKU</label>
                <input type="text" id="sku" name="sku" placeholder="Código do produto">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="marca">Marca</label>
                <input type="text" id="marca" name="marca" placeholder="Ex: Apple, Samsung">
            </div>
            <div class="form-group">
                <label for="modelo">Modelo</label>
                <input type="text" id="modelo" name="modelo" placeholder="Ex: iPhone 12">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="peso">Peso (kg)</label>
                <input type="number" id="peso" name="peso" step="0.01" min="0" placeholder="0.00">
            </div>
            <div class="form-group">
                <label for="dimensoes">Dimensões</label>
                <input type="text" id="dimensoes" name="dimensoes" placeholder="Ex: 10x20x5 cm">
            </div>
        </div>
        
        <div class="form-group">
            <label for="descricao">Descrição Curta</label>
            <textarea id="descricao" name="descricao" rows="3" placeholder="Descrição curta do produto..."></textarea>
        </div>
        
        <div class="form-group">
            <label for="descricao_completa">Descrição Completa</label>
            <textarea id="descricao_completa" name="descricao_completa" rows="6" placeholder="Descrição detalhada do produto..."></textarea>
        </div>
        
        <div class="form-group">
            <label for="imagem">Imagem do Produto</label>
            <input type="file" id="imagem" name="imagem" accept="image/png,image/jpeg,image/jpg,image/gif,image/webp">
            <small class="form-help">Formatos aceitos: PNG, JPG, JPEG, GIF, WEBP (máx. 5MB)</small>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="ordem">Ordem de Exibição</label>
                <input type="number" id="ordem" name="ordem" min="1" value="1">
            </div>
        </div>
        
        <div class="form-group">
            <label class="checkbox-label">
                <input type="checkbox" id="ativo" name="ativo" checked>
                <span>Produto ativo (exibir na loja)</span>
            </label>
        </div>
        
        <div class="form-group">
            <label class="checkbox-label">
                <input type="checkbox" id="destaque" name="destaque">
                <span>Produto em destaque (aparecer na página inicial)</span>
            </label>
        </div>
        
        <div class="form-actions">
            <a href="{{ url_for('admin_produtos') }}" class="btn btn-secondary">
                <i class="fas fa-times"></i> Cancelar
            </a>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Salvar Produto
            </button>
        </div>
    </form>
</div>

<script>
document.getElementById('nome').addEventListener('input', function() {
    const slug = document.getElementById('slug');
    if (!slug.value) {
        // Gerar slug básico (será processado no backend)
        slug.value = this.value.toLowerCase()
            .normalize('NFD')
            .replace(/[\u0300-\u036f]/g, '')
            .replace(/[^a-z0-9]+/g, '-')
            .replace(/^-+|-+$/g, '');
    }
});
</script>
{% endblock %}

